{% extends "base.html" %}
{% load static %}

{% block title %}{{ room.name }}{% endblock %}

{% block content %}
<h2>Salon : {{ room.name }}</h2>

<a href="{% url 'room_list' %}">← Retour aux salons</a>
<hr>

<div id="messages" style="border:1px solid #ccc; padding:10px; height:300px; overflow:auto;">
    {% for message in messages %}
        <p data-id="{{ message.id }}">
            <strong>{{ message.user.username }}</strong> :
            {{ message.content }}

            {% if message.user == request.user %}
                <button class="delete-btn" data-id="{{ message.id }}">❌</button>
            {% endif %}
        </p>
    {% empty %}
        <p><em>Aucun message pour l’instant</em></p>
    {% endfor %}
</div>

<form id="chat-form" method="post" style="margin-top:10px;">
    {% csrf_token %}
    <input
        type="text"
        name="content"
        placeholder="Votre message..."
        style="width:80%;"
        required
    >
    <button type="submit">Envoyer</button>
</form>

<script src="{% static 'chat/chat.js' %}"></script>
{% endblock %}
